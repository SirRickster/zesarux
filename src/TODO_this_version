--Inicio Minimizado de ventanas


ok? *problema que todas las funciones que activan ventana por posición, como al pulsar ventana, tienen que ver
que ventana está minimizada y con el setting de "hide on minimize" activo


* al minimizar se ve inicialmente la ventana minimizada, y al refrescar, desaparece.
Esto es un efecto no provocado aunque creo que queda bien
aunque si se pulsa en el titulo de la ventana, desaparece pero se queda activa

--Fin Minimizado de ventanas

---

-con menu cerrado, sin ventanas: pulsar boton derecho en iconos del escritorio,
lo hace pero el menu contextual sale arriba del todo y no en la posición del cursor



-Opción por defecto no permitir "zoom x" diferente de "zoom y" al redimensionar ventana mediante ratón. Quedarse con valor inferior de zoom
ok *pendiente sdl1,sdl2,X11. acabar de probar bien


-sdl en debian 12 32 bits inicializa muy lento


-Botones superiores no gestionan errores generados por un item
Ejemplo:
pulsamos boton network-> zeng online client-> list rooms
Si el remoto tiene diferente versión ZRCP, se genera error por debug_printf pero no se ve en el menu. El menu se cierra. Aparece el error al abrir el menu con F5
Si vamos desde menu principal-> network-> zeng online client-> list rooms, el error si que se ve
O sea parece que al pulsar desde los botones, se sale del menu y se quita el aviso de "abre menu debido a error"
(    	    	if_pending_error_message=1;
menu_fire_event_open_menu();
)



-SDL2 no deja cambiar a zoom 2 redimensionando con ratón

----

ZENG Online

-Si se hace get-snapshot sin haber uno primero, creo que peta: no deberia porque se controla que el size no sea 0
-Cliente sin permisos de get-snapshot, en el footer acaba diciendo OFFLINE. No deberia poner ese mensaje si no tiene permisos de get-snapshot



-Modo streaming
acabar de probar cambios maquina spectrum y no spectrum en master y slave, antes y despues de conectar



Revisar si hay mas sitios donde es necesario  pthread_testcancel();


En modo streaming en debug CPU indicarlo de alguna manera

Al hacer debug cpu->reset salir de online? Independientemente de si es modo streaming?


Si por ejemplo conectado a partida online desde spectrum, cambio a maquina z88,
y se sigue escuchando la musica del juego online


- Posible diagrama gráfico de una conexión ZENG/ZENG online donde se vea como se están recibiendo/enviando paquetes de datos etc.
En diferentes roles (master/slave), en partida streaming o no, si se trae snapshot, o stream de video, o stream de audio
ok *mostrar porcentajes de full/differential silence/nosilence de envio streaming
*icono para zengonlinestatus
ok *definir tamaño por defecto ventana

Teclado en pantalla no va con Zeng online?
------



-Concepto de zx desktop que muestra archivos de una carpeta.
Archivos especiales .zxicons identifican iconos del tipo de ahora.
Otros archivos como .tap etc se pueden pulsar (como ahora con los accesos directos) y cargarlos



-Mac timer. probar diferentes escenarios. probar con Z88 y lemmings. probar con carga desde cinta real

-Documentar decir que antes en Windows se usaba timer Date
Decir otros casos que timer se usaba

-Detector silencio de la tarjeta de sonido  en vez de hacer directamente no enviar sonido,
debería meter un frame de audio antes donde se pase del último valor al 0, suponiendo que es en el 0
donde se queda la tarjeta al desconectarse
->solo se oye el "click" con alsa
->No da buen resultado ese fadeout, se oye un zumbidillo a medida que va bajando el volumen, cada vez que baja 1 valor el volumen, se oye un pequeño click
->quiza con sampleo de 16 bits se podria hacer mas progresivo sin que se notase

-Modo streaming video para ql? Moviendo memoria de video


-al insertar cintas parece que no se cierra menu, y antes creo que si que se hacia. creo que al meter cinta en real tape

--ay player poder cargar playlist de archivo, grabar playlist
ok *permitir cargar playlist desde linea de comandos
ok *mejorar random del ay player (para sl shuffle) usando el mismo algoritmo que zxlife y otros
*muchos archivos ay de la carpeta de demos de spectrum no cargan. ejemplo: thelyra2demo05,icecreammain.ay

-Audio sdl callback esta por defecto el old callback o el new? depende de si windows o linux.
Ver comentarios en el código donde está explicado

-tecla F para reducir/aumentar volumen en 10%
ok *icono para aumentar y reducir

AY Player
ok-tecla F para siguiente/anterior pista en ay player
ok-tecla F para siguiente/anterior archivo en ay player
ok*tecla para agregar archivo a favoritos, generando una playlist de favoritos que se puede luego guardar
*smartload de m3u
ok *si se borra playlist luego deja hacer next file y da un error
*poder generar archivos ay?
*parece que no calcula correctamente tiempos en algunas canciones, saca algo menos. Por ejemplo toi acid game pista 9 (la musica de intro de la primera y segunda parte)
Parece que esos de toi estan mal definidos, dura unos 3 segundos mas
->Parametro para poder sumar tiempo a las canciones. Tocar en ay_player_playing_timer, if (ay_song_length_counter>ay_song_length+Incremento) {
*Video ay player con todas nuevas features
ok*Icono de volumen centrarlo en vertical
ok*Marcar canción en playlist (no favorita) tanto en lista de playlist como en player, y opción para grabar ítems marcados en playlist
ok*Al salvar playlist de marcados (y también playlist normal?) decir si append o truncate, para poder añadir más canciones marcadas
ok*si se borra playlist deberia pararse reproduccion. porque si no, se quedan activos los botones de next y previous?
ok*probar zvfs_fopen_write_append en mmc haciendo append de una playlist grabada en imagen mmc
ok*probar sobreescribir tap out y que aparezca opcion de rotate y que funcione rotate


-Al dejar una ventana con items de menu, en background, se deberia quitar el color del item seleccionado. Si no parece que esa ventana esta activa.
Ejemplo con AY Player

ok-grabar archivo en imagen mmc no deja. hago mount, y le indico ruta en 0://archivo.m3u por ejemplo
(por cierto hay que forzar mostrar unidad mmc al cambiar unidad en Drives)
->Permito mostrar unidad mmc siempre que este montada

-Poder enviar eventos a ventanas. Por ejemplo para el ay player, una función de diga enviar un mensaje (“next track”) q ventana (“ayplayer”). El como acepta ese evento de momento es una incógnita
Quizá llama a la función que crea la ventana con algún flag específico